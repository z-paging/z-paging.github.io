(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{412:function(t,e,l){"use strict";l.r(e);var i=l(45),a=Object(i.a)({},(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[l("h3",{attrs:{id:"虚拟列表配置"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#虚拟列表配置"}},[t._v("#")]),t._v(" 虚拟列表配置 "),l("Badge",{attrs:{text:"2.2.5"}})],1),t._v(" "),l("blockquote",[l("p",[t._v("轻松渲染万级列表数据。")])]),t._v(" "),l("div",{staticClass:"custom-block tip"},[l("p",{staticClass:"custom-block-title"},[t._v("为什么需要虚拟列表？")]),t._v(" "),l("ul",[l("li",[l("div",{staticStyle:{"font-size":"14px"}},[t._v("在一般情况下，无论是使用scroll-view滚动还是页面滚动，即使进行了分页，当列表本身长度很长时依然会存在严重的性能问题。随着渲染的dom越来越多，页面占用的内存会持续升高，从而造成页面卡顿、白屏等问题。")])]),t._v(" "),l("li",[l("div",{staticStyle:{"font-size":"14px"}},[t._v("虚拟列表适合长列表渲染，当需要渲染一万条数据时，实际上不需要渲染一万个cell，只需要渲染屏幕可视范围内的cell即可，超出屏幕的不应该渲染，然后随着列表滚动不断切换需要显示或销毁的cell。这可以保证无论有多少数据，页面渲染的dom都不会无限增加，它将保持在一个较低的水平，从而保持了列表的良好性能。")])])])]),t._v(" "),l("div",{staticClass:"custom-block warning"},[l("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),l("p",[t._v("① 由于超出屏幕的cell可能被销毁并重新创建，因此cell内的switch等带状态的控件同样将被销毁和重新创建，因此请确保是通过for循环item绑定它们的状态的，否则其状态将丢失。"),l("br"),t._v("\n②"),l("code",[t._v("use-virtual-list")]),t._v("与"),l("code",[t._v("use-inner-list")]),t._v("在微信小程序中部分较高版本调试库会报"),l("code",[t._v('More than one slot named "cell" are found...')]),t._v("的警告并导致开发者工具卡顿，将基础库版本调到"),l("code",[t._v("2.18.0")]),t._v("以下即可。因线上没有控制台打印，因此不会影响线上版本。"),l("br"),t._v("\n③ "),l("code",[t._v("use-virtual-list")]),t._v("与"),l("code",[t._v("use-inner-list")]),t._v("在微信小程序中若在slot插入的cell内部引用了页面中的data、computed、methods等，将导致cell只能渲染一行，需等待官方修复，详见："),l("a",{attrs:{href:"https://ask.dcloud.net.cn/question/147333",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击查看详情"),l("OutboundLink")],1),l("br"),t._v("\n④ "),l("code",[t._v("use-virtual-list")]),t._v("与"),l("code",[t._v("use-inner-list")]),t._v("在微信小程序中若在slot插入的cell内部通过switch等修改item内部变量，内部变量修改无效，需等待官方修复，详见："),l("a",{attrs:{href:"https://ask.dcloud.net.cn/question/147494",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击查看详情"),l("OutboundLink")],1),l("br"),t._v("\n⑤在使用vue3且同时运行在微信小程序上时，暂不支持"),l("code",[t._v("use-inner-list")]),t._v("与"),l("code",[t._v("use-virtual-list(非兼容模式)")]),t._v("。\n⑥上方 ②、③、④、⑤ 四个问题可通过使用"),l("code",[t._v("兼容模式")]),t._v("解决，在微信小程序中推荐使用兼容模式的写法！"),l("br"),t._v("\n⑦在微信小程序中使用虚拟列表时，如果不同的cell中的image不同，会存在image闪动的问题。目前原因不明，可通过给view设置"),l("code",[t._v("background-image")]),t._v("来代替"),l("code",[t._v("<image />")]),t._v("以解决此问题。")])]),t._v(" "),l("table",[l("thead",[l("tr",[l("th",{staticStyle:{"text-align":"left"}},[t._v("参数")]),t._v(" "),l("th",{staticStyle:{"text-align":"left"}},[t._v("说明")]),t._v(" "),l("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),l("th",{staticStyle:{"text-align":"left"}},[t._v("默认值")]),t._v(" "),l("th",{staticStyle:{"text-align":"left"}},[t._v("可选值")])])]),t._v(" "),l("tbody",[l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("use-virtual-list")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("是否使用虚拟列表"),l("p",{staticStyle:{color:"red"}},[t._v("(使用页面滚动或nvue时，不支持虚拟列表。在nvue中z-paging内置了list组件，效果与虚拟列表类似，并且可以提供更好的性能)")]),l("p",{staticStyle:{color:"red"}},[t._v("(当服务端一次性返回大量数据时，可结合本地分页处理。不能一次性通过"),l("code",[t._v("complete")]),t._v("传上万条数据，否则会导致卡顿，本地分页参见："),l("RouterLink",{attrs:{to:"/api/props/local-paging.html"}},[t._v("本地分页配置")]),t._v(")")],1)]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Boolean")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("false")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("true")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("use-compatibility-mode "),l("Badge",{attrs:{text:"2.4.0"}})],1),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("在使用虚拟列表时，是否使用兼容模式，兼容模式写法较繁琐，但可提供良好的兼容性。在微信小程序中，推荐使用兼容模式。具体写法请参照demo中的"),l("code",[t._v("virtual-list-compatibility-demo.vue")])]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Boolean")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("false")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("true")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("extra-data "),l("Badge",{attrs:{text:"2.4.0"}})],1),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("使用兼容模式时传递的附加数据，可选、非必须")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Object")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("null")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("-")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("cell-height-mode")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("虚拟列表cell高度模式，默认为fixed，也就是每个cell高度完全相同，将以第一个cell高度为准进行计算。可选值："),l("code",[t._v("dynamic")]),t._v("，即代表高度是动态非固定的；"),l("code",[t._v("dynamic")]),t._v("性能低于"),l("code",[t._v("fixed")]),t._v("，因此如非必要，请使用"),l("code",[t._v("fixed")])]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("fixed")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("dynamic")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("preload-page")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("预加载的列表可视范围(列表高度)页数，默认为7，即预加载当前页及上下各7页的cell。此数值越大，则虚拟列表中加载的dom越多，内存消耗越大(会维持在一个稳定值)，但增加预加载页面数量可缓解快速滚动短暂白屏问题")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Number|String")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("7")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("-")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("virtual-list-col "),l("Badge",{attrs:{text:"2.2.8"}})],1),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("虚拟列表列数，默认为1。常用于每行有多列的情况，例如每行有2列数据，需要将此值设置为2"),l("p",{staticStyle:{color:"red"}},[t._v("(仅支持"),l("code",[t._v("cell-height-mode")]),t._v("为fixed的情况，即：不支持动态高度的瀑布流)")]),t._v("例：需要设置每行2列的瀑布流时，请设置："),l("code",[t._v(':virtual-list-col="2"')]),t._v("、"),l("code",[t._v(":inner-list-style=\"{'display':'flex','flex-wrap':'wrap'}\"")]),t._v("(设置inner-list开启flex布局，且子view自动换行)、"),l("code",[t._v(":inner-cell-style=\"{width:'50%'}\"")]),t._v("(设置子view宽度为50%)")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Number|String")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("1")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("-")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("virtual-scroll-fps")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("虚拟列表scroll取样帧率，默认为80，过低容易出现白屏问题，过高容易出现卡顿问题")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Number|String")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("80")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("-")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("use-inner-list")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("是否在z-paging内部循环渲染列表(使用内置列表)，若"),l("code",[t._v("use-virtual-list")]),t._v("为true，则此项恒为true"),l("br"),l("br"),t._v("此模式下使用"),l("code",[t._v('slot="cell"')]),t._v("插入cell；使用"),l("code",[t._v('slot="header"')]),t._v("插入header(在cell顶部且跟随列表滚动)；使用"),l("code",[t._v('slot="footer"')]),t._v("插入bottom(在cell底部且跟随列表滚动)；  "),l("p",{staticStyle:{color:"red"}},[t._v("(由于字节跳动小程序不支持"),l("code",[t._v("slot-scope")]),t._v("，因此"),l("code",[t._v("use-inner-list")]),t._v("无法在字节跳动小程序中使用)")]),l("p",{staticStyle:{color:"red"}},[t._v("(use-inner-list在微信小程序中部分较高版本调试库会报"),l("code",[t._v('More than one slot named "cell" are found...')]),t._v("的警告并导致开发者工具卡顿，将基础库版本调到2.18.0以下即可。因线上没有控制台打印，因此不会影响线上版本。)")])]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Boolean")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("false")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("true")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("force-close-inner-list "),l("Badge",{attrs:{text:"2.2.7"}})],1),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("强制关闭inner-list，默认为false，如果为true将强制关闭innerList，适用于开启了虚拟列表后需要强制关闭inner-list的情况")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Boolean")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("false")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("true")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("cell-key-name "),l("Badge",{attrs:{text:"2.2.7"}})],1),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("内置列表cell的key名称"),l("p",{staticStyle:{color:"red"}},[t._v("(仅nvue有效，在nvue中开启use-inner-list时必须填此项)")])]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v('""')]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("-")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("inner-list-style")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("innerList样式")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Object")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("{}")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("-")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("inner-cell-style "),l("Badge",{attrs:{text:"2.2.8"}})],1),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("innerCell样式")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Object")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("{}")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("-")])])])]),t._v(" "),l("hr"),t._v(" "),l("h3",{attrs:{id:"虚拟列表效果演示"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#虚拟列表效果演示"}},[t._v("#")]),t._v(" 虚拟列表效果演示")]),t._v(" "),l("h4",{attrs:{id:"渲染1w-条数据时-dom中渲染的列表item数量始终保持在45个左右。"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#渲染1w-条数据时-dom中渲染的列表item数量始终保持在45个左右。"}},[t._v("#")]),t._v(" 渲染1w+条数据时，dom中渲染的列表item数量始终保持在45个左右。")]),t._v(" "),l("p",[l("img",{staticStyle:{width:"800px"},attrs:{src:"https://z-paging.zxlee.cn/public/img/z-paging-virtual-list.gif"}})]),t._v(" "),l("hr"),t._v(" "),l("h3",{attrs:{id:"虚拟列表写法示例"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#虚拟列表写法示例"}},[t._v("#")]),t._v(" 虚拟列表写法示例")]),t._v(" "),l("p",[l("RouterLink",{attrs:{to:"/start/use.html#虚拟列表示例"}},[t._v("点击查看")])],1)])}),[],!1,null,null,null);e.default=a.exports}}]);