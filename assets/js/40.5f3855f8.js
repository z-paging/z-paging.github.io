(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{419:function(t,e,a){"use strict";a.r(e);var s=a(45),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"虚拟列表-内置列表模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#虚拟列表-内置列表模块"}},[t._v("#")]),t._v(" 虚拟列表&内置列表模块 "),a("Badge",{attrs:{text:"2.2.5"}})],1),t._v(" "),a("blockquote",[a("p",[t._v("轻松渲染万级列表数据。")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("为什么需要虚拟列表？")]),t._v(" "),a("ul",[a("li",[a("div",{staticStyle:{"font-size":"14px"}},[t._v("在一般情况下，无论是使用scroll-view滚动还是页面滚动，即使进行了分页，当列表本身长度很长时依然会存在严重的性能问题。随着渲染的dom越来越多，页面占用的内存会持续升高，从而造成页面卡顿、白屏等问题。")])]),t._v(" "),a("li",[a("div",{staticStyle:{"font-size":"14px"}},[t._v("虚拟列表适合长列表渲染，当需要渲染一万条数据时，实际上不需要渲染一万个cell，只需要渲染屏幕可视范围内的cell即可，超出屏幕的不应该渲染，然后随着列表滚动不断切换需要显示或销毁的cell。这可以保证无论有多少数据，页面渲染的dom都不会无限增加，它将保持在一个较低的水平，从而保持了列表的良好性能。")])])])]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("p",[t._v("①由于超出屏幕的cell可能被销毁并重新创建，因此cell内的switch等带状态的控件同样将被销毁和重新创建，因此请确保是通过for循环item绑定它们的状态的，否则其状态将丢失。"),a("br"),t._v("\n②cell高度模式为dynamic时，z-paging会在cell渲染时获取并缓存对应cell的高度，因此如果cell的高度是异步增高的(也就是在cell初次渲染后增高，例如评论列表，在cell渲染后手动插入子评论，或是"),a("code",[t._v("<image />")]),t._v("标签定宽，高度根据图片实际大小撑开的)，其高度需要确定已更新后调用"),a("code",[t._v("this.$refs.paging.didUpdateVirtualListCell(index)")]),t._v("进行更新，删除列表cell亦然，否则将导致列表跳动。具体方法参见"),a("RouterLink",{attrs:{to:"/api/methods/main.html#虚拟列表相关方法"}},[t._v("虚拟列表相关方法")]),t._v("。"),a("br"),t._v("\n③"),a("code",[t._v("use-virtual-list")]),t._v("与"),a("code",[t._v("use-inner-list")]),t._v("在微信小程序中部分较高版本调试库会报"),a("code",[t._v('More than one slot named "cell" are found...')]),t._v("的警告并导致开发者工具卡顿，将基础库版本调到"),a("code",[t._v("2.18.0")]),t._v("以下即可。因线上没有控制台打印，因此不会影响线上版本。"),a("br"),t._v("\n④ "),a("code",[t._v("use-virtual-list")]),t._v("与"),a("code",[t._v("use-inner-list")]),t._v("在微信小程序中若在slot插入的cell内部引用了页面中的data、computed、methods等，将导致cell只能渲染一行，需等待官方修复，详见："),a("a",{attrs:{href:"https://ask.dcloud.net.cn/question/147333",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击查看详情"),a("OutboundLink")],1),t._v("。(替代解决方案：在调用complete前处理列表数据，此时可以调用页面中的data、computed、methods等，在计算完毕后给列表中的item新增一个属性并赋值，在cell中直接获取这个值即可)"),a("br"),t._v("\n⑤ "),a("code",[t._v("use-virtual-list")]),t._v("与"),a("code",[t._v("use-inner-list")]),t._v("在微信小程序中若在slot插入的cell内部通过switch等修改item内部变量，内部变量修改无效，需等待官方修复，详见："),a("a",{attrs:{href:"https://ask.dcloud.net.cn/question/147494",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击查看详情"),a("OutboundLink")],1),a("br"),t._v("\n⑥在使用vue3且同时运行在微信小程序上时，暂不支持"),a("code",[t._v("use-inner-list")]),t._v("与"),a("code",[t._v("use-virtual-list(非兼容模式)")]),t._v("。"),a("br"),t._v("\n⑦上方 ③、④、⑤、⑥ 四个问题可通过使用"),a("code",[t._v("兼容模式")]),t._v("解决，在微信小程序中推荐使用兼容模式的写法！"),a("br"),t._v("\n⑧在微信小程序中使用虚拟列表时，如果不同的cell中的image不同，会存在image闪动的问题。目前原因不明，可通过给view设置"),a("code",[t._v("background-image")]),t._v("来代替"),a("code",[t._v("<image />")]),t._v("以解决此问题。"),a("br"),t._v("\n⑨在微信小程序模拟器中，cell高度模式为dynamic时可能存在上下跳动的问题，此为模拟器的bug，不影响生产用户正常使用。可使用真机预览模式进行测试。")],1)]),t._v(" "),a("h3",{attrs:{id:"props"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#props"}},[t._v("#")]),t._v(" "),a("RouterLink",{attrs:{to:"/api/props/virtual-list.html"}},[t._v("Props")])],1),t._v(" "),a("h4",{attrs:{id:"属性配置-设置是否开启虚拟列表、设置是否开启内置列表、设置虚拟列表高度模式、设置虚拟列表个性化配置等"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#属性配置-设置是否开启虚拟列表、设置是否开启内置列表、设置虚拟列表高度模式、设置虚拟列表个性化配置等"}},[t._v("#")]),t._v(" 属性配置：设置"),a("code",[t._v("是否开启虚拟列表")]),t._v("、设置"),a("code",[t._v("是否开启内置列表")]),t._v("、设置"),a("code",[t._v("虚拟列表高度模式")]),t._v("、设置"),a("code",[t._v("虚拟列表个性化配置")]),t._v("等")]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"slots"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#slots"}},[t._v("#")]),t._v(" "),a("RouterLink",{attrs:{to:"/api/slot/main.html#虚拟列表-内置列表slot"}},[t._v("Slots")])],1),t._v(" "),a("h4",{attrs:{id:"插槽-设置虚拟列表或内置列表插入的cell、header、footer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插槽-设置虚拟列表或内置列表插入的cell、header、footer"}},[t._v("#")]),t._v(" 插槽：设置虚拟列表或内置列表插入的"),a("code",[t._v("cell")]),t._v("、"),a("code",[t._v("header")]),t._v("、"),a("code",[t._v("footer")])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"methods"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#methods"}},[t._v("#")]),t._v(" "),a("RouterLink",{attrs:{to:"/api/methods/main.html#虚拟列表相关方法"}},[t._v("Methods")])],1),t._v(" "),a("h4",{attrs:{id:"方法-在动态高度虚拟列表中新增缓存高度、更新指定行缓存高度、删除指定行缓存高度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法-在动态高度虚拟列表中新增缓存高度、更新指定行缓存高度、删除指定行缓存高度"}},[t._v("#")]),t._v(" 方法：在动态高度虚拟列表中"),a("code",[t._v("新增缓存高度")]),t._v("、"),a("code",[t._v("更新指定行缓存高度")]),t._v("、"),a("code",[t._v("删除指定行缓存高度")])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"events"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#events"}},[t._v("#")]),t._v(" "),a("RouterLink",{attrs:{to:"/api/events/main.html#虚拟列表-内置列表相关事件"}},[t._v("Events")])],1),t._v(" "),a("h4",{attrs:{id:"事件-监听虚拟列表当前渲染的数组改变、监听虚拟列表或内置列表时点击了cell"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件-监听虚拟列表当前渲染的数组改变、监听虚拟列表或内置列表时点击了cell"}},[t._v("#")]),t._v(" 事件：监听"),a("code",[t._v("虚拟列表当前渲染的数组改变")]),t._v("、监听"),a("code",[t._v("虚拟列表或内置列表时点击了cell")])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"效果演示"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#效果演示"}},[t._v("#")]),t._v(" 效果演示")]),t._v(" "),a("h4",{attrs:{id:"渲染1w-条数据时-dom中渲染的列表item数量始终保持在45个左右。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#渲染1w-条数据时-dom中渲染的列表item数量始终保持在45个左右。"}},[t._v("#")]),t._v(" 渲染1w+条数据时，dom中渲染的列表item数量始终保持在45个左右。")]),t._v(" "),a("p",[a("img",{staticStyle:{width:"800px"},attrs:{src:"https://z-paging.zxlee.cn/public/img/z-paging-virtual-list.gif"}})]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[t._v("#")]),t._v(" 示例")]),t._v(" "),a("ul",[a("li",[a("RouterLink",{attrs:{to:"/start/use.html#虚拟列表示例"}},[t._v("虚拟列表示例")])],1)])])}),[],!1,null,null,null);e.default=r.exports}}]);